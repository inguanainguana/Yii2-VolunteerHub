<?php
$this->title = '–õ–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏';
$this->registerMetaTag([
    'name' => 'description',
    'content' => '–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ VolunteerHub. –£–∑–Ω–∞–π—Ç–µ –æ –Ω–æ–≤—ã—Ö –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å–∫–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ.'
]);
$this->registerMetaTag([
    'name' => 'keywords',
    'content' => 'VolunteerHub, –ª–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å–∫–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –Ω–æ–≤—ã–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã, —É—á–∞—Å—Ç–∏–µ –≤ –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å—Ç–≤–µ, —Å–æ–±—ã—Ç–∏—è, –ø–æ–º–æ—â—å —Å–æ–æ–±—â–µ—Å—Ç–≤—É, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã, –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è'
]);

?>
<div class="site-index mt-4">

    <div class="hero">
        <img src="img/647874552d5db.jpg"
             alt="–ë–∞–Ω–Ω–µ—Ä —Å –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º–∏" class="img-fluid">
        <div class="hero-content">
            <h1>–õ–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h1>
            <p>–ü–æ–¥—Ä—É–∂–∏—Ç–µ—Å—å —Å –≤–æ–ª–æ–Ω—Ç–µ—Ä–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ VolunteerHub –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–æ–±—ã—Ç–∏—è–º–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∏ —É—á–∞—Å—Ç–≤—É—é—Ç. –≠—Ç–æ
                —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤, –Ω–æ –∏ –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –Ω–∏–º,
                –≤–Ω–æ—Å—è —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞. <br> –í–º–µ—Å—Ç–µ –º—ã –º–æ–∂–µ–º –∏–∑–º–µ–Ω–∏—Ç—å –º–∏—Ä –∫ –ª—É—á—à–µ–º—É!</p>
        </div>
    </div>
</div>
<div class="container mt-5">
    <?php use yii\helpers\Html;
    use yii\helpers\Url;

    if (!empty($friendsEvents)): ?>
        <div class="row justify-content-center">
            <div class="col-md-6">
            <?php foreach ($friendsEvents as $registration): ?>
                    <div class="card shadow-sm mx-auto mt-4" style="width: 100%;">
                        <?= Html::img("@web/" . $registration->event->image, ['class' => 'card-img-top', 'alt' => $registration->event->title]) ?>
                        <div class="card-body">
                            <h5 class="card-title"><?= Html::encode($registration->event->title) ?></h5>
                            <p class="card-text">
                                <span style="font-size: 1.1em;">üìù</span>
                                <span class="short-description"><?= mb_substr($registration->event->description, 0, 140, 'UTF-8') ?>...</span>
                                <span class="full-description" style="display: none;"><?= $registration->event->description ?></span>
                                <button class="btn btn-link toggle-description" style="cursor: pointer; display: inline-block; margin-left: 5px; padding: 0;">
                                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                                </button>
                            </p>
                            <p class="card-text">
                                <span style="font-size: 1.1em;">üìç</span> <?= Html::encode($registration->event->location) ?>
                            </p>
                            <p class="card-text">
                                <span style="font-size: 1.1em;">üïí</span> <?= date('d.m.Y, H:i', strtotime($registration->event->start_date)) ?>
                                - <?= date('d.m.Y, H:i', strtotime($registration->event->end_date)) ?>
                            </p>
                            <?= Html::a('–ü–æ–¥—Ä–æ–±–Ω–µ–µ', ['event/view', 'id' => $registration->event->id], ['class' => 'btn btn-primary']) ?>
                        </div>
                        <div class="card-footer text-muted d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <span class="mr-2">üë§</span>
                                <?= Html::a(Html::encode($registration->user->username), ['site/profile', 'id' => $registration->user->id], ['class' => 'font-weight-bold text-decoration-none']) ?>
                            </div>
                            <span>
                                –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: <?= date('d.m.Y, H:i', strtotime($registration->registration_date)) ?>
                            </span>
                        </div>
                    </div>

            <?php endforeach; ?>
        </div>
        </div>
    <?php else: ?>
        <div class="alert alert-success text-center" role="alert">
            –£ –≤–∞—Å –ª–∏–±–æ –Ω–µ—Ç –¥—Ä—É–∑–µ–π, –ª–∏–±–æ –≤–∞—à–∏ –¥—Ä—É–∑—å—è –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ –∫–∞–∫–æ–µ-–ª–∏–±–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ. üòä
        </div>
    <?php endif; ?>
</div>


<h3 class="mt-5">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
        <div class="row row-cols-1 row-cols-md-3 g-4 mt-2">
            <?php if (!empty($recommendedEvents)): ?>
                <?php foreach ($recommendedEvents as $event): ?>
                    <div class="col">
                        <div class="card" style="width: 21rem;">
                            <?= Html::img("@web/" . $event->image, ['class' => 'card-img-top', 'alt' => $event->title, 'style' => 'max-height: 230px; object-fit: cover; margin: auto; display: block;']) ?>
                            <div class="card-body">
                                <h5 class="card-title"><?= $event->title ?></h5>
                                <p class="card-text"><?= mb_substr($event->description, 0, 140, 'UTF-8') ?>...</p>
                                <p class="card-text">üìç <?= $event->location ?></p>
                                <p class="card-text">üïí <?= date('d.m.Y, H:i', strtotime($event->start_date)) ?>
                                    - <?= date('d.m.Y, H:i', strtotime($event->end_date)) ?></p>
                                <?= Html::a('–ü–æ–¥—Ä–æ–±–Ω–µ–µ', ['event/view', 'id' => $event->id], ['class' => 'btn btn-primary']) ?>
                            </div>
                        </div>
                    </div>
                <?php endforeach; ?>
            <?php else: ?>
                <div class="alert alert-warning text-center" role="alert">
                    –ù–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.
                </div>
            <?php endif; ?>
            <div class="col">
                <div class="card" style="width: 21rem; text-align: center; background-color: #fff;">
                    <img src="icons8-–≤–æ–ª–æ–Ω—Ç–µ—Ä—Å—Ç–≤–æ-100.png" class="card-img-top" alt="–ò–∫–æ–Ω–∫–∞ –≤–æ–ª–æ–Ω—Ç–µ—Ä–∞"
                         style="height: 230px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title">–ï—â—ë <?= $totalEventsCount ?> –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã!</h5>
                        <p class="card-text">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –Ω–∞ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ!</p>
                        <?= Html::a('–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ', ['event/index'], ['class' => 'btn btn-primary']) ?>
                    </div>
                </div>
            </div>
        </div>

        <script>
            document.querySelectorAll('.toggle-description').forEach(button => {
                button.addEventListener('click', function () {
                    const parentParagraph = this.parentElement;
                    const fullDescription = parentParagraph.querySelector('.full-description');
                    const shortDescription = parentParagraph.querySelector('.short-description');

                    if (fullDescription.style.display === 'none') {
                        fullDescription.style.display = 'inline';
                        shortDescription.style.display = 'none';
                        this.textContent = '–°–∫—Ä—ã—Ç—å';
                    } else {
                        fullDescription.style.display = 'none';
                        shortDescription.style.display = 'inline';
                        this.textContent = '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å';
                    }
                });
            });
        </script>